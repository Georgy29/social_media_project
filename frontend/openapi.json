{"openapi":"3.1.0","info":{"title":"FastAPI","version":"0.1.0"},"paths":{"/users/me":{"get":{"tags":["users"],"summary":"Read Me","operationId":"read_me_users_me_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/{username}":{"get":{"tags":["users"],"summary":"Get User Profile","operationId":"get_user_profile_users__username__get","parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserProfile"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{username}/timeline":{"get":{"tags":["users"],"summary":"Get User Timeline","operationId":"get_user_timeline_users__username__timeline_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"username","in":"path","required":true,"schema":{"type":"string","title":"Username"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TimelineItem"},"title":"Response Get User Timeline Users  Username  Timeline Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/":{"post":{"tags":["users"],"summary":"Create User","operationId":"create_user_users__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/follow":{"post":{"tags":["users"],"summary":"Follow User","operationId":"follow_user_users__user_id__follow_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/{user_id}/unfollow":{"post":{"tags":["users"],"summary":"Unfollow User","operationId":"unfollow_user_users__user_id__unfollow_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"integer","title":"User Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/users/me/avatar":{"put":{"tags":["users"],"summary":"Update Avatar","operationId":"update_avatar_users_me_avatar_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AvatarUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/users/me/cover":{"put":{"tags":["users"],"summary":"Update Cover","operationId":"update_cover_users_me_cover_put","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CoverUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/token":{"post":{"tags":["auth"],"summary":"Login","description":"Exchanges username/password for a JWT access token.","operationId":"login_for_access_token_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"401":{"description":"Incorrect username or password"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/posts/":{"get":{"tags":["posts"],"summary":"Read Posts","operationId":"read_posts_posts__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":10,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Post"},"title":"Response Read Posts Posts  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"post":{"tags":["posts"],"summary":"Create New Post","operationId":"create_new_post_posts__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/posts/{post_id}":{"delete":{"tags":["posts"],"summary":"Delete Existing Post","operationId":"delete_existing_post_posts__post_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"path","required":true,"schema":{"type":"integer","title":"Post Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"put":{"tags":["posts"],"summary":"Update Post","operationId":"update_post_posts__post_id__put","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"path","required":true,"schema":{"type":"integer","title":"Post Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PostUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/posts/{post_id}/like":{"post":{"tags":["posts"],"summary":"Like Post","operationId":"like_post_posts__post_id__like_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"path","required":true,"schema":{"type":"integer","title":"Post Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/posts/{post_id}/unlike":{"post":{"tags":["posts"],"summary":"Unlike Post","operationId":"unlike_post_posts__post_id__unlike_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"path","required":true,"schema":{"type":"integer","title":"Post Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/posts/{post_id}/retweet":{"post":{"tags":["posts"],"summary":"Retweet Post","operationId":"retweet_post_posts__post_id__retweet_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"path","required":true,"schema":{"type":"integer","title":"Post Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/posts/{post_id}/unretweet":{"post":{"tags":["posts"],"summary":"Unretweet Post","operationId":"unretweet_post_posts__post_id__unretweet_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"path","required":true,"schema":{"type":"integer","title":"Post Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/posts/with_counts/":{"get":{"tags":["posts"],"summary":"Feed with reaction counts","description":"Returns posts ordered by newest first, including owner username and like/retweet counts.","operationId":"read_posts_with_counts_posts_with_counts__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":10,"title":"Limit"}},{"name":"view","in":"query","required":false,"schema":{"enum":["public","subscriptions"],"type":"string","default":"public","title":"View"}}],"responses":{"200":{"description":"List of posts with counts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PostWithCounts"},"title":"Response Read Posts With Counts Posts With Counts  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/admin/posts/{post_id}":{"delete":{"tags":["admin"],"summary":"Admin Delete Post","operationId":"admin_delete_post_admin_posts__post_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"post_id","in":"path","required":true,"schema":{"type":"integer","title":"Post Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/media/presign":{"post":{"tags":["media"],"summary":"Presign Media","operationId":"presign_media_media_presign_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaPresignRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaPresignResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/media/{media_id}/complete":{"post":{"tags":["media"],"summary":"Complete Media","operationId":"complete_media_media__media_id__complete_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"media_id","in":"path","required":true,"schema":{"type":"integer","title":"Media Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MediaCompleteResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}}},"components":{"schemas":{"AvatarUpdate":{"properties":{"media_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Media Id"}},"type":"object","title":"AvatarUpdate"},"Body_login_for_access_token_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_token_post"},"CoverUpdate":{"properties":{"media_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Media Id"}},"type":"object","title":"CoverUpdate"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"MediaCompleteResponse":{"properties":{"media_id":{"type":"integer","title":"Media Id"},"status":{"type":"string","title":"Status"},"public_url":{"type":"string","title":"Public Url"}},"type":"object","required":["media_id","status","public_url"],"title":"MediaCompleteResponse"},"MediaPresignRequest":{"properties":{"filename":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Filename"},"content_type":{"type":"string","title":"Content Type"},"size_bytes":{"type":"integer","title":"Size Bytes"},"kind":{"type":"string","enum":["post_image","avatar","profile_cover"],"title":"Kind"}},"type":"object","required":["content_type","size_bytes","kind"],"title":"MediaPresignRequest"},"MediaPresignResponse":{"properties":{"media_id":{"type":"integer","title":"Media Id"},"upload_url":{"type":"string","title":"Upload Url"},"public_url":{"type":"string","title":"Public Url"}},"type":"object","required":["media_id","upload_url","public_url"],"title":"MediaPresignResponse"},"Post":{"properties":{"content":{"type":"string","title":"Content"},"id":{"type":"integer","title":"Id"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"owner_id":{"type":"integer","title":"Owner Id"}},"type":"object","required":["content","id","timestamp","owner_id"],"title":"Post"},"PostCreate":{"properties":{"content":{"type":"string","title":"Content"},"media_id":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Media Id"}},"type":"object","required":["content"],"title":"PostCreate"},"PostUpdate":{"properties":{"content":{"type":"string","title":"Content"}},"type":"object","required":["content"],"title":"PostUpdate"},"PostWithCounts":{"properties":{"content":{"type":"string","title":"Content"},"id":{"type":"integer","title":"Id"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"owner_id":{"type":"integer","title":"Owner Id"},"likes_count":{"type":"integer","title":"Likes Count"},"retweets_count":{"type":"integer","title":"Retweets Count"},"owner_username":{"type":"string","title":"Owner Username"},"owner_avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Owner Avatar Url"},"is_liked":{"type":"boolean","title":"Is Liked"},"is_retweeted":{"type":"boolean","title":"Is Retweeted"},"media_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Media Url"}},"type":"object","required":["content","id","timestamp","owner_id","likes_count","retweets_count","owner_username","is_liked","is_retweeted"],"title":"PostWithCounts"},"TimelineItem":{"properties":{"type":{"type":"string","enum":["posts","retweets"],"title":"Type"},"activity_at":{"type":"string","format":"date-time","title":"Activity At"},"post":{"$ref":"#/components/schemas/PostWithCounts"},"reposted_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Reposted At"}},"type":"object","required":["type","activity_at","post"],"title":"TimelineItem"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"}},"type":"object","required":["access_token","token_type"],"title":"Token"},"User":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"id":{"type":"integer","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"cover_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Url"}},"type":"object","required":["username","email","id","created_at"],"title":"User"},"UserCreate":{"properties":{"username":{"type":"string","title":"Username"},"email":{"type":"string","title":"Email"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","email","password"],"title":"UserCreate"},"UserProfile":{"properties":{"id":{"type":"integer","title":"Id"},"username":{"type":"string","title":"Username"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"followers_count":{"type":"integer","title":"Followers Count"},"following_count":{"type":"integer","title":"Following Count"},"posts_count":{"type":"integer","title":"Posts Count"},"avatar_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Avatar Url"},"cover_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cover Url"}},"type":"object","required":["id","username","created_at","followers_count","following_count","posts_count"],"title":"UserProfile"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"token"}}}}}}